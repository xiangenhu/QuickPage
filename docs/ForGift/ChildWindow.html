<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<HTML xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"> 
    <HEAD>
        <TITLE></TITLE>
        <META name="google" value="notranslate">         
        <META http-equiv="Content-Type" content="text/html; charset=utf-8">
        <STYLE type="text/css">		
		#AChildElement { margin:0 10px; width:280px; height:330px; border:1px solid #999 }
		</STYLE>
        
        <!-- SKO Service Hooks -->              
        <SCRIPT type="text/javascript" src="js/Util/EMACS5CompatibilityPatches.js"></SCRIPT>
        <SCRIPT type="text/javascript" src="js/Util/UUID.js"></SCRIPT>
        <SCRIPT type="text/javascript" src="js/Util/encoder.js"></SCRIPT>
		<SCRIPT type="text/javascript" src="js/Util/Zet.js"></SCRIPT>
		<SCRIPT type="text/javascript" src="js/Util/Serialization.js"></SCRIPT>
		<SCRIPT type="text/javascript" src="js/SKO_Architecture/Messaging.js"></SCRIPT>
		<SCRIPT type="text/javascript" src="js/SKO_Architecture/Client_Messaging_Gateway.js"></SCRIPT>
		<SCRIPT type="text/javascript">
			var TEST_SERVICE, GATEWAY_SERVICE, PARENT_POSTING_STUB;
            TEST_SERVICE = Client_Messaging_Gateway.TestService("ChildTestService");
			PARENT_POSTING_STUB = Client_Messaging_Gateway.PostMessageGatewayStub("MainPostingGateway", null, null, parent);
			GATEWAY_SERVICE = Client_Messaging_Gateway.PostMessageGateway("Client Gateway (Main)", [TEST_SERVICE], PARENT_POSTING_STUB);

			var TEST_SERVICE, GATEWAY_SERVICE, PARENT_POSTING_STUB;
            TEST_SERVICE = Client_Messaging_Gateway.TestService("ChildTestService");
			PARENT_POSTING_STUB = Client_Messaging_Gateway.PostMessageGatewayStub("MainPostingGateway", null, null, parent);
			GATEWAY_SERVICE = Client_Messaging_Gateway.PostMessageGateway("Client Gateway (Main)", [TEST_SERVICE], PARENT_POSTING_STUB);
            var oldReceiveMsg = TEST_SERVICE.receiveMessage;
            TEST_SERVICE.receiveMessage = function(msg){
				if (msg.getActor() != "SKO") return;
				
                oldReceiveMsg(msg);
                document.getElementById("AChildElement").innerHTML  = msg.getActor() + " " +
                    msg.getVerb() + " " +
                    msg.getObject() + " " + msg.getResult();
            };

			function NotifyParentofSKOEnded(){
				TEST_SERVICE.sendTestMessage("PP", "notified", "SKO", "ended");
			}
		</SCRIPT>
        <INPUT type="button" value="Notify parent window that the SKO is ended" onclick="NotifyParentofSKOEnded()">
        Message received:
        <DIV id="AChildElement"></DIV>
   </BODY>
</HTML>/html>